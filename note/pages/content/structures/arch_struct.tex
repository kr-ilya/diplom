\newpage

\section{Разработка архитектурно-структурных решений}

Выполнение кода предметно-ориентированного языка осуществляется за счет интерпретатора,
который должен быть спроектирован в виде модуля, подключаемого к серверной части конструктора Telegram ботов.

Обобщенная модульная структура серверной части конструктора представлена на рисунке~\ref{f:modules_server_struct}.

\begin{figure}[ht]
	\centering
	\vspace{\toppaddingoffigure}
	\includegraphics[width=0.7\textwidth]{structures/modules_server_struct.pdf}
	\caption{Модульная структура серверной части конструктора}
	\label{f:modules_server_struct}
\end{figure}

Сервис ботов отвечает за управление состоянием бота и редактирование его компонентной структуры.
Сервис ботов зависит от сервиса пользователей, который предоставляет первому методы для авторизации пользователя.
Также сервис ботов зависит от модуля компонентов, который описывает структуры компонентов и реализует их логику выполнения.

Обслуживающий сервис отвечает за логику работы бота. 
Он выполняет обработку запроса к боту от пользователя Telegram.
В соответствии с разработанной компонентной структурой бота, обслуживающий сервис вызывает методы модуля компонентов для запуска их логики выполнения.

Одним из компонентов является компонент выполнения кода на предметно-ориентированном языке.
Отсюда, модуль компонентов зависит от модуля интерпретации предметно-ориентированного языка.
При запуске компонента выполнения DSL кода, выполняется вызов функции выполнения кода из модуля интерпретации.

В данном проекте для возможности интеграции с серверной частью конструктора Telegram ботов необходимо реализовать программный интерфейс,
который бы предоставлял возможность передачи кода и значений внешних переменных, интерпретатору предметно-ориентированного языка.

Работа интерпретатора состоит из последовательного выполнения следующих этапов:
\begin{enumerate}
	\item лексический анализ;
	\item синтаксический анализ;
	\item семантический анализ;
	\item исполнение команд.
\end{enumerate}

Обобщенная структура интерпретатора представлена на рисунке~\ref{f:full_interpreter_struct}.

\begin{figure}[ht]
	\centering
	\vspace{\toppaddingoffigure}
	\includegraphics[width=1.0\textwidth]{structures/full_interpreter_struct.pdf}
	\caption{Обобщенная структура интерпретатора}
	\label{f:full_interpreter_struct}
\end{figure}

Для решения поставленной задачи, в первую очередь, необходимо в соответствии с указанными требованиями
разработать грамматику предметно-ориентированного языка и спроектировать обобщенную структуру программы интерпретатора.

\input{pages/content/structures/grammar.tex}
\input{pages/content/structures/lexical_analyzer.tex}
\input{pages/content/structures/parser.tex}
\input{pages/content/structures/semantic_analyzer.tex}
\input{pages/content/structures/evaluator.tex}

\section*{Вывод}

В данном разделе были разработаны архитектурно-структурные решения по поставленной задаче.
Рассмотрена модульная структура серверной части конструктора,
определена связь между модулем компонентов и модулем интерпретации предметно-ориентированного языка.

Рассмотрена обобщенная структура интерпретатора и этапы его работы.

Выполнен обзор способов задания языков, разработана и описана с помощью расширенной формы Бэкуса-Наура формальная грамматика предметно-ориентированного языка.
Выполнена разработка структурных решений и алгоритмов функционирования каждого из этапов интерпретатора, а именно:
лексического анализатора, синтаксического анализатора, семантического анализатора и исполнителя.